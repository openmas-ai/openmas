[mypy]
python_version = 3.10
warn_return_any = true
warn_unused_configs = true

# By default, strict settings for the main code
disallow_untyped_defs = true
disallow_incomplete_defs = true
check_untyped_defs = true
disallow_untyped_decorators = true
no_implicit_optional = true
strict_optional = true

# Ignore errors from 3rd party libraries
[mypy.plugins.pydantic.*]
follow_imports = skip
implicit_reexport = True

[mypy-mcp.*]
ignore_missing_imports = true

# Add missing imports for third-party libraries
[mypy-httpx.*]
ignore_missing_imports = true

[mypy-fastapi.*]
ignore_missing_imports = true

[mypy-structlog.*]
ignore_missing_imports = true

[mypy-yaml.*]
ignore_missing_imports = true

# For test files, more lenient type checking
[mypy-tests.*]
disallow_untyped_defs = false
disallow_incomplete_defs = false
check_untyped_defs = true
disallow_untyped_decorators = false
disable_error_code = arg-type, union-attr, misc, call-arg, assignment, safe-super, list-item, attr-defined

# Ignore import errors for the simple_mas package in tests
[mypy-simple_mas.*]
ignore_missing_imports = false

# Ignore errors from pytest decorators/fixtures
[mypy-pytest.*]
ignore_missing_imports = true

[mypy-unittest.mock]
ignore_missing_imports = true

# Specific overrides for test files
[mypy-tests.test_http_communicator]
disable_error_code = arg-type

[mypy-tests.test_deployment_discovery]
disable_error_code = list-item

[mypy-tests.test_mcp_stdio_communicator]
disable_error_code = attr-defined

# Specific overrides for source files
[mypy-simple_mas.communication.mcp]
disable_error_code = no-redef

[mypy-simple_mas.communication.mcp.*]
disable_error_code = no-redef

[mypy-simple_mas.agent.mcp]
ignore_missing_imports = true

[mypy-simple_mas.communication.base]
disable_error_code = arg-type, assignment

# Ignore missing grpc stubs
[mypy-simple_mas.communication.grpc.*]
ignore_missing_imports = True
disable_error_code = attr-defined, assignment, misc
